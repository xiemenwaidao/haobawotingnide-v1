---
import { SITE } from "@config";
import Posts from "@layouts/Posts.astro";
import getPageNumbers from "@utils/getPageNumbers";

import { MicroCMSUtils, microcmsFactory } from "@utils/microcms";

const blogResponse = await MicroCMSUtils.getAllContents({
    getListFn: microcmsFactory.blogs.getList,
});
const blogs = blogResponse.contents;

const totalPages = getPageNumbers(blogResponse.totalCount);

const paginatedPosts = blogs.slice(0, SITE.postPerPage);
---

<Posts
    posts={paginatedPosts}
    pageNum={1}
    totalPages={totalPages.length}
    type="posts"
/>
